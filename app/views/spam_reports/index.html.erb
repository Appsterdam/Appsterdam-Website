<table>
  <tr>
    <th>Name</th>
    <th>Weigth</th>
    <th>IPs</th>
    <th>Reporters</th>
    <th></th>
  </tr>
  <% @members.each do |member| %>
    <tr>
      <td><%= link_to member.name, member_path(member) %></td>
      <td><%= member.spam_reports.size %></td>
      <td><%= member.spam_reports.map(&:ip_address).to_sentence %></td>
      <td><%= member.spam_reports.map { |s| s.reporter.try(:name) }.compact.to_sentence %></td>
      <td>
        <%= form_for member do |f| %>
          <%= f.hidden_field :marked_as_spam, :value => false %>
          <%= f.submit "Unmark as spam", :confirm => "Add `#{member.name}' back to the membership listing?" %>
        <% end %>
        <% unless member.marked_as_spam? %>
          <%= form_for member do |f| %>
            <%= f.hidden_field :marked_as_spam, :value => true %>
            <%= f.submit "Remove membership listing", :confirm => "Remove `#{member.name}' from the membership listing?" %>
          <% end %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>

